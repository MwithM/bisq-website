<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top pl-md-5 pr-md-5 pl-sm-3 pr-0">

  <a class="navbar-brand" href="{% lingual_link home %}"><img src="/images/bisq-logo.svg" height="30" loading="lazy"/></a>

  <!-- Language selector for mobile -->
  {% if page.en-only == false %}
  <div class="dropdown mobile-language-selector more-info-desktop">
    <button class="btn btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ page.lang_display }}
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      {% assign pages = site.pages | where:"ref", page.ref | sort: 'lang_display' %}
      {% for page in pages %}
        <div class="dropdown-item btn-icon">
          <div class="float-right">
            <a href="{{ page.url }}">{{ page.lang_display }}</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}


  <button class="navbar-toggler pr-3 pr-md-0 collapsed" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">

    <ul class="navbar-nav ml-auto">

      <!-- MOBILE MENU -->

      {% for item in site.data.main_nav[page.lang].links %}
        <li class="nav-item {% if page.url == item.url | append: '/' %}current{% endif %}">
          {% if item.target == "_blank" %}
            <a class="nav-link" rel="noopener" target="{{ item.target }}" href="{{ item.url }}">{{ item.title }}</a>
          {% else %}
            <a class="nav-link" href="{{ item.url }}">{{ item.title }}</a>
          {% endif %}
        </li>
      {% endfor %}

      {% for item in site.data.main_nav[page.lang].mobile_links %}
        <li class="downloads-mobile nav-item {% if page.url == item.url | append: '/' %}current{% endif %}">
          {% if item.target == "_blank" %}
            <a class="nav-link" rel="noopener" target="{{ item.target }}" href="{{ item.url }}">{{ item.title }}</a>
          {% else %}
            <a class="nav-link" href="{{ item.url }}">{{ item.title }}</a>
          {% endif %}
        </li>
      {% endfor %}

      {% assign item = site.data[page.lang].main_nav %}
      <li class="downloads-mobile nav-item {% if page.url == item.url %}current{% endif %}">
          <a class="nav-link" href="{% lingual_link downloads %}">{{ item.liDownloads }}</a>
      </li>

      <!-- DESKTOP MENU -->

      <li class="downloads-desktop more-info-desktop nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="learnMoreDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{ item.liLearnMore }}
        </a>
        <div class="dropdown-menu dropdown-menu-right shadow-lg" aria-labelledby="learnMoreDropdown">
          <div class="dropdown-item btn-icon">
            <div class="float-right">
              <a href="https://docs.bisq.network/" target='_blank'>{{ item.liDocumentation }}</a>
            </div>
          </div>

          <div class="dropdown-item btn-icon">
            <div class="float-right">
              <a href="/blog/">{{ item.liBlog }}</a>
            </div>
          </div>

          <div class="dropdown-item btn-icon">
            <div class="float-right">
              <a href="{% lingual_link community %}">{{ item.liCommunity }}</a>
            </div>
          </div>
        </div>
      </li>


      <li class="downloads-desktop nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="downloadDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{ item.buttonDownloads }}
        </a>
        <div class="dropdown-menu dropdown-menu-right shadow-lg" aria-labelledby="downloadDropdown">
          {% include os_selector_options.html %}
        </div>
      </li>

      <!-- Language selector for desktop -->
      {% if page.en-only == false %}
      <li class="downloads-desktop nav-item dropdown more-info-desktop language-selector">
        <a class="nav-link dropdown-toggle visible-language" href='#' id="languageSelectorDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{ page.lang_display }}
        </a>
        <div class="dropdown-menu" aria-labelledby="languageSelectorDropdown">
          {% assign pages = site.pages | where:"ref", page.ref | sort: 'lang_display' %}
          {% for page in pages %}
          <div class="dropdown-item btn-icon">
            <div class="float-right">
              <a href="{{ page.url }}">{{ page.lang_display }}</a>
            </div>
          </div>
          {% endfor %}
        </div>
      </li>
      {% endif %}


      <li class="nav-item">
        <div class="mode-toggle nav-link"><img alt="mode toggle" src="/images/mode-toggle.svg" /></div>
      </li>

    </ul>
  </div>
</nav>
